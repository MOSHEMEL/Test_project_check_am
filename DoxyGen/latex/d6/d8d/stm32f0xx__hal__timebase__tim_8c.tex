\hypertarget{stm32f0xx__hal__timebase__tim_8c}{}\doxysection{C\+:/\+Users/nicko/source/repos/\+A\+P\+T\+X1\+\_\+1/\+Core/\+Src/stm32f0xx\+\_\+hal\+\_\+timebase\+\_\+tim.c File Reference}
\label{stm32f0xx__hal__timebase__tim_8c}\index{C:/Users/nicko/source/repos/APTX1\_1/Core/Src/stm32f0xx\_hal\_timebase\_tim.c@{C:/Users/nicko/source/repos/APTX1\_1/Core/Src/stm32f0xx\_hal\_timebase\_tim.c}}


H\+AL time base based on the hardware T\+IM.  


{\ttfamily \#include \char`\"{}stm32f0xx\+\_\+hal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stm32f0xx\+\_\+hal\+\_\+tim.\+h\char`\"{}}\newline
Include dependency graph for stm32f0xx\+\_\+hal\+\_\+timebase\+\_\+tim.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=294pt]{da/da2/stm32f0xx__hal__timebase__tim_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
H\+A\+L\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a879cdb21ef051eb81ec51c18147397d5}{H\+A\+L\+\_\+\+Init\+Tick}} (uint32\+\_\+t Tick\+Priority)
\begin{DoxyCompactList}\small\item\em This function configures the T\+I\+M1 as a time base source. The time source is configured to have 1ms time base with a dedicated Tick interrupt priority. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_aaf651af2afe688a991c657f64f8fa5f9}{H\+A\+L\+\_\+\+Suspend\+Tick}} (void)
\begin{DoxyCompactList}\small\item\em Suspend Tick increment. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a24e0ee9dae1ec0f9d19200f5575ff790}{H\+A\+L\+\_\+\+Resume\+Tick}} (void)
\begin{DoxyCompactList}\small\item\em Resume Tick increment. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
T\+I\+M\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
H\+AL time base based on the hardware T\+IM. 

\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
\doxysubsubsection*{\begin{center}\copyright{} Copyright (c) 2020 S\+T\+Microelectronics. All rights reserved.\end{center} }

This software component is licensed by ST under B\+SD 3-\/Clause license, the \char`\"{}\+License\char`\"{}; You may not use this file except in compliance with the License. You may obtain a copy of the License at\+: opensource.\+org/licenses/\+B\+S\+D-\/3-\/\+Clause 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{stm32f0xx__hal__timebase__tim_8c_a879cdb21ef051eb81ec51c18147397d5}\label{stm32f0xx__hal__timebase__tim_8c_a879cdb21ef051eb81ec51c18147397d5}} 
\index{stm32f0xx\_hal\_timebase\_tim.c@{stm32f0xx\_hal\_timebase\_tim.c}!HAL\_InitTick@{HAL\_InitTick}}
\index{HAL\_InitTick@{HAL\_InitTick}!stm32f0xx\_hal\_timebase\_tim.c@{stm32f0xx\_hal\_timebase\_tim.c}}
\doxysubsubsection{\texorpdfstring{HAL\_InitTick()}{HAL\_InitTick()}}
{\footnotesize\ttfamily H\+A\+L\+\_\+\+Status\+Type\+Def H\+A\+L\+\_\+\+Init\+Tick (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{Tick\+Priority }\end{DoxyParamCaption})}



This function configures the T\+I\+M1 as a time base source. The time source is configured to have 1ms time base with a dedicated Tick interrupt priority. 

\begin{DoxyNote}{Note}
This function is called automatically at the beginning of program after reset by H\+A\+L\+\_\+\+Init() or at any time when clock is configured, by H\+A\+L\+\_\+\+R\+C\+C\+\_\+\+Clock\+Config(). 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em Tick\+Priority} & Tick interrupt priority. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em H\+AL} & status \\
\hline
\end{DoxyRetVals}


Definition at line 42 of file stm32f0xx\+\_\+hal\+\_\+timebase\+\_\+tim.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{43 \{}
\DoxyCodeLine{44   RCC\_ClkInitTypeDef    clkconfig;}
\DoxyCodeLine{45   uint32\_t              uwTimclock = 0;}
\DoxyCodeLine{46   uint32\_t              uwPrescalerValue = 0;}
\DoxyCodeLine{47   uint32\_t              pFLatency;}
\DoxyCodeLine{48   }
\DoxyCodeLine{49   \textcolor{comment}{/*Configure the TIM1 IRQ priority */}}
\DoxyCodeLine{50   HAL\_NVIC\_SetPriority(TIM1\_BRK\_UP\_TRG\_COM\_IRQn, TickPriority ,0); }
\DoxyCodeLine{51   }
\DoxyCodeLine{52   \textcolor{comment}{/* Enable the TIM1 global Interrupt */}}
\DoxyCodeLine{53   HAL\_NVIC\_EnableIRQ(TIM1\_BRK\_UP\_TRG\_COM\_IRQn); }
\DoxyCodeLine{54   }
\DoxyCodeLine{55   \textcolor{comment}{/* Enable TIM1 clock */}}
\DoxyCodeLine{56   \_\_HAL\_RCC\_TIM1\_CLK\_ENABLE();}
\DoxyCodeLine{57   }
\DoxyCodeLine{58   \textcolor{comment}{/* Get clock configuration */}}
\DoxyCodeLine{59   HAL\_RCC\_GetClockConfig(\&clkconfig, \&pFLatency);}
\DoxyCodeLine{60   }
\DoxyCodeLine{61   \textcolor{comment}{/* Compute TIM1 clock */}}
\DoxyCodeLine{62   uwTimclock = HAL\_RCC\_GetPCLK1Freq();}
\DoxyCodeLine{63    }
\DoxyCodeLine{64   \textcolor{comment}{/* Compute the prescaler value to have TIM1 counter clock equal to 1MHz */}}
\DoxyCodeLine{65   uwPrescalerValue = (uint32\_t) ((uwTimclock / 1000000) -\/ 1);}
\DoxyCodeLine{66   }
\DoxyCodeLine{67   \textcolor{comment}{/* Initialize TIM1 */}}
\DoxyCodeLine{68   \mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}}.Instance = TIM1;}
\DoxyCodeLine{69   }
\DoxyCodeLine{70   \textcolor{comment}{/* Initialize TIMx peripheral as follow:}}
\DoxyCodeLine{71 \textcolor{comment}{  + Period = [(TIM1CLK/1000) -\/ 1]. to have a (1/1000) s time base.}}
\DoxyCodeLine{72 \textcolor{comment}{  + Prescaler = (uwTimclock/1000000 -\/ 1) to have a 1MHz counter clock.}}
\DoxyCodeLine{73 \textcolor{comment}{  + ClockDivision = 0}}
\DoxyCodeLine{74 \textcolor{comment}{  + Counter direction = Up}}
\DoxyCodeLine{75 \textcolor{comment}{  */}}
\DoxyCodeLine{76   \mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}}.Init.Period = (1000000 / 1000) -\/ 1;}
\DoxyCodeLine{77   \mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}}.Init.Prescaler = uwPrescalerValue;}
\DoxyCodeLine{78   \mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}}.Init.ClockDivision = 0;}
\DoxyCodeLine{79   \mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}}.Init.CounterMode = TIM\_COUNTERMODE\_UP;}
\DoxyCodeLine{80   \textcolor{keywordflow}{if}(HAL\_TIM\_Base\_Init(\&\mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}}) == HAL\_OK)}
\DoxyCodeLine{81   \{}
\DoxyCodeLine{82     \textcolor{comment}{/* Start the TIM time Base generation in interrupt mode */}}
\DoxyCodeLine{83     \textcolor{keywordflow}{return} HAL\_TIM\_Base\_Start\_IT(\&\mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}});}
\DoxyCodeLine{84   \}}
\DoxyCodeLine{85   }
\DoxyCodeLine{86   \textcolor{comment}{/* Return function status */}}
\DoxyCodeLine{87   \textcolor{keywordflow}{return} HAL\_ERROR;}
\DoxyCodeLine{88 \}}

\end{DoxyCode}
\mbox{\Hypertarget{stm32f0xx__hal__timebase__tim_8c_a24e0ee9dae1ec0f9d19200f5575ff790}\label{stm32f0xx__hal__timebase__tim_8c_a24e0ee9dae1ec0f9d19200f5575ff790}} 
\index{stm32f0xx\_hal\_timebase\_tim.c@{stm32f0xx\_hal\_timebase\_tim.c}!HAL\_ResumeTick@{HAL\_ResumeTick}}
\index{HAL\_ResumeTick@{HAL\_ResumeTick}!stm32f0xx\_hal\_timebase\_tim.c@{stm32f0xx\_hal\_timebase\_tim.c}}
\doxysubsubsection{\texorpdfstring{HAL\_ResumeTick()}{HAL\_ResumeTick()}}
{\footnotesize\ttfamily void H\+A\+L\+\_\+\+Resume\+Tick (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Resume Tick increment. 

\begin{DoxyNote}{Note}
Enable the tick increment by Enabling T\+I\+M1 update interrupt. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 108 of file stm32f0xx\+\_\+hal\+\_\+timebase\+\_\+tim.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{109 \{}
\DoxyCodeLine{110   \textcolor{comment}{/* Enable TIM1 Update interrupt */}}
\DoxyCodeLine{111   \_\_HAL\_TIM\_ENABLE\_IT(\&\mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}}, TIM\_IT\_UPDATE);}
\DoxyCodeLine{112 \}}

\end{DoxyCode}
\mbox{\Hypertarget{stm32f0xx__hal__timebase__tim_8c_aaf651af2afe688a991c657f64f8fa5f9}\label{stm32f0xx__hal__timebase__tim_8c_aaf651af2afe688a991c657f64f8fa5f9}} 
\index{stm32f0xx\_hal\_timebase\_tim.c@{stm32f0xx\_hal\_timebase\_tim.c}!HAL\_SuspendTick@{HAL\_SuspendTick}}
\index{HAL\_SuspendTick@{HAL\_SuspendTick}!stm32f0xx\_hal\_timebase\_tim.c@{stm32f0xx\_hal\_timebase\_tim.c}}
\doxysubsubsection{\texorpdfstring{HAL\_SuspendTick()}{HAL\_SuspendTick()}}
{\footnotesize\ttfamily void H\+A\+L\+\_\+\+Suspend\+Tick (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Suspend Tick increment. 

\begin{DoxyNote}{Note}
Disable the tick increment by disabling T\+I\+M1 update interrupt. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 96 of file stm32f0xx\+\_\+hal\+\_\+timebase\+\_\+tim.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{97 \{}
\DoxyCodeLine{98   \textcolor{comment}{/* Disable TIM1 update Interrupt */}}
\DoxyCodeLine{99   \_\_HAL\_TIM\_DISABLE\_IT(\&\mbox{\hyperlink{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}{htim1}}, TIM\_IT\_UPDATE);                                                  }
\DoxyCodeLine{100 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}\label{stm32f0xx__hal__timebase__tim_8c_a25fc663547539bc49fecc0011bd76ab5}} 
\index{stm32f0xx\_hal\_timebase\_tim.c@{stm32f0xx\_hal\_timebase\_tim.c}!htim1@{htim1}}
\index{htim1@{htim1}!stm32f0xx\_hal\_timebase\_tim.c@{stm32f0xx\_hal\_timebase\_tim.c}}
\doxysubsubsection{\texorpdfstring{htim1}{htim1}}
{\footnotesize\ttfamily T\+I\+M\+\_\+\+Handle\+Type\+Def htim1}



Definition at line 29 of file stm32f0xx\+\_\+hal\+\_\+timebase\+\_\+tim.\+c.

