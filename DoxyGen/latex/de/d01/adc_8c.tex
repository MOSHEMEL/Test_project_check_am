\hypertarget{adc_8c}{}\doxysection{C\+:/\+Users/nicko/source/repos/\+A\+P\+T\+X1\+\_\+1/\+Core/\+Src/adc.c File Reference}
\label{adc_8c}\index{C:/Users/nicko/source/repos/APTX1\_1/Core/Src/adc.c@{C:/Users/nicko/source/repos/APTX1\_1/Core/Src/adc.c}}
{\ttfamily \#include \char`\"{}adc.\+h\char`\"{}}\newline
Include dependency graph for adc.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=235pt]{da/d6c/adc_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{adc_8c_aca7f21e220653e353491bceced7c5df3}{M\+X\+\_\+\+A\+D\+C\+\_\+\+Init}} (void)
\item 
void \mbox{\hyperlink{adc_8c_ac3139540667c403c5dfd37a99c610b1c}{H\+A\+L\+\_\+\+A\+D\+C\+\_\+\+Msp\+Init}} (A\+D\+C\+\_\+\+Handle\+Type\+Def $\ast$adc\+Handle)
\item 
void \mbox{\hyperlink{adc_8c_a3f61f2c2af0f122f81a87af8ad7b4360}{H\+A\+L\+\_\+\+A\+D\+C\+\_\+\+Msp\+De\+Init}} (A\+D\+C\+\_\+\+Handle\+Type\+Def $\ast$adc\+Handle)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
A\+D\+C\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}
\item 
D\+M\+A\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}{hdma\+\_\+adc}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{adc_8c_a3f61f2c2af0f122f81a87af8ad7b4360}\label{adc_8c_a3f61f2c2af0f122f81a87af8ad7b4360}} 
\index{adc.c@{adc.c}!HAL\_ADC\_MspDeInit@{HAL\_ADC\_MspDeInit}}
\index{HAL\_ADC\_MspDeInit@{HAL\_ADC\_MspDeInit}!adc.c@{adc.c}}
\doxysubsubsection{\texorpdfstring{HAL\_ADC\_MspDeInit()}{HAL\_ADC\_MspDeInit()}}
{\footnotesize\ttfamily void H\+A\+L\+\_\+\+A\+D\+C\+\_\+\+Msp\+De\+Init (\begin{DoxyParamCaption}\item[{A\+D\+C\+\_\+\+Handle\+Type\+Def $\ast$}]{adc\+Handle }\end{DoxyParamCaption})}

A\+DC G\+P\+IO Configuration ~\newline
 P\+C0 -\/-\/-\/---$>$ A\+D\+C\+\_\+\+I\+N10

Definition at line 132 of file adc.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{133 \{}
\DoxyCodeLine{134 }
\DoxyCodeLine{135   \textcolor{keywordflow}{if}(adcHandle-\/>Instance==ADC1)}
\DoxyCodeLine{136   \{}
\DoxyCodeLine{137   \textcolor{comment}{/* USER CODE BEGIN ADC1\_MspDeInit 0 */}}
\DoxyCodeLine{138 }
\DoxyCodeLine{139   \textcolor{comment}{/* USER CODE END ADC1\_MspDeInit 0 */}}
\DoxyCodeLine{140     \textcolor{comment}{/* Peripheral clock disable */}}
\DoxyCodeLine{141     \_\_HAL\_RCC\_ADC1\_CLK\_DISABLE();}
\DoxyCodeLine{142   \textcolor{comment}{}}
\DoxyCodeLine{143 \textcolor{comment}{    /**ADC GPIO Configuration    }}
\DoxyCodeLine{144 \textcolor{comment}{    PC0     -\/-\/-\/-\/-\/-\/> ADC\_IN10 }}
\DoxyCodeLine{145 \textcolor{comment}{    */}}
\DoxyCodeLine{146     HAL\_GPIO\_DeInit(\mbox{\hyperlink{main_8h_a12d31c673a0fc190bb0ce4cd32e8515b}{ADC\_CURRENT\_SENSE\_GPIO\_Port}}, \mbox{\hyperlink{main_8h_a6a952bc224666166da15b2ab6d273c53}{ADC\_CURRENT\_SENSE\_Pin}});}
\DoxyCodeLine{147 }
\DoxyCodeLine{148     \textcolor{comment}{/* ADC1 DMA DeInit */}}
\DoxyCodeLine{149     HAL\_DMA\_DeInit(adcHandle-\/>DMA\_Handle);}
\DoxyCodeLine{150   \textcolor{comment}{/* USER CODE BEGIN ADC1\_MspDeInit 1 */}}
\DoxyCodeLine{151 }
\DoxyCodeLine{152   \textcolor{comment}{/* USER CODE END ADC1\_MspDeInit 1 */}}
\DoxyCodeLine{153   \}}
\DoxyCodeLine{154 \} }

\end{DoxyCode}
\mbox{\Hypertarget{adc_8c_ac3139540667c403c5dfd37a99c610b1c}\label{adc_8c_ac3139540667c403c5dfd37a99c610b1c}} 
\index{adc.c@{adc.c}!HAL\_ADC\_MspInit@{HAL\_ADC\_MspInit}}
\index{HAL\_ADC\_MspInit@{HAL\_ADC\_MspInit}!adc.c@{adc.c}}
\doxysubsubsection{\texorpdfstring{HAL\_ADC\_MspInit()}{HAL\_ADC\_MspInit()}}
{\footnotesize\ttfamily void H\+A\+L\+\_\+\+A\+D\+C\+\_\+\+Msp\+Init (\begin{DoxyParamCaption}\item[{A\+D\+C\+\_\+\+Handle\+Type\+Def $\ast$}]{adc\+Handle }\end{DoxyParamCaption})}

A\+DC G\+P\+IO Configuration ~\newline
 P\+C0 -\/-\/-\/---$>$ A\+D\+C\+\_\+\+I\+N10

Definition at line 88 of file adc.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{89 \{}
\DoxyCodeLine{90 }
\DoxyCodeLine{91   GPIO\_InitTypeDef GPIO\_InitStruct = \{0\};}
\DoxyCodeLine{92   \textcolor{keywordflow}{if}(adcHandle-\/>Instance==ADC1)}
\DoxyCodeLine{93   \{}
\DoxyCodeLine{94   \textcolor{comment}{/* USER CODE BEGIN ADC1\_MspInit 0 */}}
\DoxyCodeLine{95 }
\DoxyCodeLine{96   \textcolor{comment}{/* USER CODE END ADC1\_MspInit 0 */}}
\DoxyCodeLine{97     \textcolor{comment}{/* ADC1 clock enable */}}
\DoxyCodeLine{98     \_\_HAL\_RCC\_ADC1\_CLK\_ENABLE();}
\DoxyCodeLine{99   }
\DoxyCodeLine{100     \_\_HAL\_RCC\_GPIOC\_CLK\_ENABLE();\textcolor{comment}{}}
\DoxyCodeLine{101 \textcolor{comment}{    /**ADC GPIO Configuration    }}
\DoxyCodeLine{102 \textcolor{comment}{    PC0     -\/-\/-\/-\/-\/-\/> ADC\_IN10 }}
\DoxyCodeLine{103 \textcolor{comment}{    */}}
\DoxyCodeLine{104     GPIO\_InitStruct.Pin = \mbox{\hyperlink{main_8h_a6a952bc224666166da15b2ab6d273c53}{ADC\_CURRENT\_SENSE\_Pin}};}
\DoxyCodeLine{105     GPIO\_InitStruct.Mode = GPIO\_MODE\_ANALOG;}
\DoxyCodeLine{106     GPIO\_InitStruct.Pull = GPIO\_NOPULL;}
\DoxyCodeLine{107     HAL\_GPIO\_Init(\mbox{\hyperlink{main_8h_a12d31c673a0fc190bb0ce4cd32e8515b}{ADC\_CURRENT\_SENSE\_GPIO\_Port}}, \&GPIO\_InitStruct);}
\DoxyCodeLine{108 }
\DoxyCodeLine{109     \textcolor{comment}{/* ADC1 DMA Init */}}
\DoxyCodeLine{110     \textcolor{comment}{/* ADC Init */}}
\DoxyCodeLine{111     \mbox{\hyperlink{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}{hdma\_adc}}.Instance = DMA1\_Channel1;}
\DoxyCodeLine{112     \mbox{\hyperlink{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}{hdma\_adc}}.Init.Direction = DMA\_PERIPH\_TO\_MEMORY;}
\DoxyCodeLine{113     \mbox{\hyperlink{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}{hdma\_adc}}.Init.PeriphInc = DMA\_PINC\_DISABLE;}
\DoxyCodeLine{114     \mbox{\hyperlink{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}{hdma\_adc}}.Init.MemInc = DMA\_MINC\_ENABLE;}
\DoxyCodeLine{115     \mbox{\hyperlink{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}{hdma\_adc}}.Init.PeriphDataAlignment = DMA\_PDATAALIGN\_WORD;}
\DoxyCodeLine{116     \mbox{\hyperlink{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}{hdma\_adc}}.Init.MemDataAlignment = DMA\_MDATAALIGN\_WORD;}
\DoxyCodeLine{117     \mbox{\hyperlink{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}{hdma\_adc}}.Init.Mode = DMA\_CIRCULAR;}
\DoxyCodeLine{118     \mbox{\hyperlink{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}{hdma\_adc}}.Init.Priority = DMA\_PRIORITY\_LOW;}
\DoxyCodeLine{119     \textcolor{keywordflow}{if} (HAL\_DMA\_Init(\&\mbox{\hyperlink{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}{hdma\_adc}}) != HAL\_OK)}
\DoxyCodeLine{120     \{}
\DoxyCodeLine{121       \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{122     \}}
\DoxyCodeLine{123 }
\DoxyCodeLine{124     \_\_HAL\_LINKDMA(adcHandle,DMA\_Handle,\mbox{\hyperlink{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}{hdma\_adc}});}
\DoxyCodeLine{125 }
\DoxyCodeLine{126   \textcolor{comment}{/* USER CODE BEGIN ADC1\_MspInit 1 */}}
\DoxyCodeLine{127 }
\DoxyCodeLine{128   \textcolor{comment}{/* USER CODE END ADC1\_MspInit 1 */}}
\DoxyCodeLine{129   \}}
\DoxyCodeLine{130 \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=290pt]{de/d01/adc_8c_ac3139540667c403c5dfd37a99c610b1c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{adc_8c_aca7f21e220653e353491bceced7c5df3}\label{adc_8c_aca7f21e220653e353491bceced7c5df3}} 
\index{adc.c@{adc.c}!MX\_ADC\_Init@{MX\_ADC\_Init}}
\index{MX\_ADC\_Init@{MX\_ADC\_Init}!adc.c@{adc.c}}
\doxysubsubsection{\texorpdfstring{MX\_ADC\_Init()}{MX\_ADC\_Init()}}
{\footnotesize\ttfamily void M\+X\+\_\+\+A\+D\+C\+\_\+\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Configure the global features of the A\+DC (Clock, Resolution, Data Alignment and number of conversion)

Configure for the selected A\+DC regular channel to be converted.

Configure for the selected A\+DC regular channel to be converted.

Configure for the selected A\+DC regular channel to be converted.

Configure for the selected A\+DC regular channel to be converted.

Definition at line 31 of file adc.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{32 \{}
\DoxyCodeLine{33   ADC\_ChannelConfTypeDef sConfig = \{0\};}
\DoxyCodeLine{34 \textcolor{comment}{}}
\DoxyCodeLine{35 \textcolor{comment}{  /** Configure the global features of the ADC (Clock, Resolution, Data Alignment and number of conversion) }}
\DoxyCodeLine{36 \textcolor{comment}{  */}}
\DoxyCodeLine{37   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Instance = ADC1;}
\DoxyCodeLine{38   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.ClockPrescaler = ADC\_CLOCK\_ASYNC\_DIV1;}
\DoxyCodeLine{39   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.Resolution = ADC\_RESOLUTION\_10B;}
\DoxyCodeLine{40   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.DataAlign = ADC\_DATAALIGN\_RIGHT;}
\DoxyCodeLine{41   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.ScanConvMode = ADC\_SCAN\_DIRECTION\_FORWARD;}
\DoxyCodeLine{42   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.EOCSelection = ADC\_EOC\_SEQ\_CONV;}
\DoxyCodeLine{43   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.LowPowerAutoWait = DISABLE;}
\DoxyCodeLine{44   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.LowPowerAutoPowerOff = DISABLE;}
\DoxyCodeLine{45   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.ContinuousConvMode = ENABLE;}
\DoxyCodeLine{46   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.DiscontinuousConvMode = DISABLE;}
\DoxyCodeLine{47   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.ExternalTrigConv = ADC\_SOFTWARE\_START;}
\DoxyCodeLine{48   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.ExternalTrigConvEdge = ADC\_EXTERNALTRIGCONVEDGE\_NONE;}
\DoxyCodeLine{49   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.DMAContinuousRequests = ENABLE;}
\DoxyCodeLine{50   \mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.Init.Overrun = ADC\_OVR\_DATA\_OVERWRITTEN;}
\DoxyCodeLine{51   \textcolor{keywordflow}{if} (HAL\_ADC\_Init(\&\mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}) != HAL\_OK)}
\DoxyCodeLine{52   \{}
\DoxyCodeLine{53     \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{54   \}\textcolor{comment}{}}
\DoxyCodeLine{55 \textcolor{comment}{  /** Configure for the selected ADC regular channel to be converted. }}
\DoxyCodeLine{56 \textcolor{comment}{  */}}
\DoxyCodeLine{57   sConfig.Channel = ADC\_CHANNEL\_10;}
\DoxyCodeLine{58   sConfig.Rank = ADC\_RANK\_CHANNEL\_NUMBER;}
\DoxyCodeLine{59   sConfig.SamplingTime = ADC\_SAMPLETIME\_239CYCLES\_5;}
\DoxyCodeLine{60   \textcolor{keywordflow}{if} (HAL\_ADC\_ConfigChannel(\&\mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}, \&sConfig) != HAL\_OK)}
\DoxyCodeLine{61   \{}
\DoxyCodeLine{62     \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{63   \}\textcolor{comment}{}}
\DoxyCodeLine{64 \textcolor{comment}{  /** Configure for the selected ADC regular channel to be converted. }}
\DoxyCodeLine{65 \textcolor{comment}{  */}}
\DoxyCodeLine{66   sConfig.Channel = ADC\_CHANNEL\_TEMPSENSOR;}
\DoxyCodeLine{67   \textcolor{keywordflow}{if} (HAL\_ADC\_ConfigChannel(\&\mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}, \&sConfig) != HAL\_OK)}
\DoxyCodeLine{68   \{}
\DoxyCodeLine{69     \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{70   \}\textcolor{comment}{}}
\DoxyCodeLine{71 \textcolor{comment}{  /** Configure for the selected ADC regular channel to be converted. }}
\DoxyCodeLine{72 \textcolor{comment}{  */}}
\DoxyCodeLine{73   sConfig.Channel = ADC\_CHANNEL\_VREFINT;}
\DoxyCodeLine{74   \textcolor{keywordflow}{if} (HAL\_ADC\_ConfigChannel(\&\mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}, \&sConfig) != HAL\_OK)}
\DoxyCodeLine{75   \{}
\DoxyCodeLine{76     \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{77   \}\textcolor{comment}{}}
\DoxyCodeLine{78 \textcolor{comment}{  /** Configure for the selected ADC regular channel to be converted. }}
\DoxyCodeLine{79 \textcolor{comment}{  */}}
\DoxyCodeLine{80   sConfig.Channel = ADC\_CHANNEL\_VBAT;}
\DoxyCodeLine{81   \textcolor{keywordflow}{if} (HAL\_ADC\_ConfigChannel(\&\mbox{\hyperlink{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}, \&sConfig) != HAL\_OK)}
\DoxyCodeLine{82   \{}
\DoxyCodeLine{83     \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{84   \}}
\DoxyCodeLine{85 }
\DoxyCodeLine{86 \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=266pt]{de/d01/adc_8c_aca7f21e220653e353491bceced7c5df3_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{de/d01/adc_8c_aca7f21e220653e353491bceced7c5df3_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}\label{adc_8c_a62fcafba91cf315db7e0e0c8f22c656f}} 
\index{adc.c@{adc.c}!hadc@{hadc}}
\index{hadc@{hadc}!adc.c@{adc.c}}
\doxysubsubsection{\texorpdfstring{hadc}{hadc}}
{\footnotesize\ttfamily A\+D\+C\+\_\+\+Handle\+Type\+Def hadc}

File Name \+: A\+D\+C.\+c Description \+: This file provides code for the configuration of the A\+DC instances.

\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
\doxysubsubsection*{\begin{center}\copyright{} Copyright (c) 2020 S\+T\+Microelectronics. All rights reserved.\end{center} }

This software component is licensed by ST under B\+SD 3-\/Clause license, the \char`\"{}\+License\char`\"{}; You may not use this file except in compliance with the License. You may obtain a copy of the License at\+: opensource.\+org/licenses/\+B\+S\+D-\/3-\/\+Clause 

Definition at line 27 of file adc.\+c.

\mbox{\Hypertarget{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}\label{adc_8c_a556a7c43d0d5bbeccebc55d3f97e0fd5}} 
\index{adc.c@{adc.c}!hdma\_adc@{hdma\_adc}}
\index{hdma\_adc@{hdma\_adc}!adc.c@{adc.c}}
\doxysubsubsection{\texorpdfstring{hdma\_adc}{hdma\_adc}}
{\footnotesize\ttfamily D\+M\+A\+\_\+\+Handle\+Type\+Def hdma\+\_\+adc}



Definition at line 28 of file adc.\+c.

