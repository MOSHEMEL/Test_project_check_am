\hypertarget{group___s_t_m32_f0xx___system___private___functions}{}\doxysection{S\+T\+M32\+F0xx\+\_\+\+System\+\_\+\+Private\+\_\+\+Functions}
\label{group___s_t_m32_f0xx___system___private___functions}\index{STM32F0xx\_System\_Private\_Functions@{STM32F0xx\_System\_Private\_Functions}}
Collaboration diagram for S\+T\+M32\+F0xx\+\_\+\+System\+\_\+\+Private\+\_\+\+Functions\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d93/group___s_t_m32_f0xx___system___private___functions}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___functions_ga93f514700ccf00d08dbdcff7f1224eb2}{System\+Init}} (void)
\begin{DoxyCompactList}\small\item\em Setup the microcontroller system. Initialize the default H\+SI clock source, vector table location and the P\+LL configuration is reset. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___functions_gae0c36a9591fe6e9c45ecb21a794f0f0f}{System\+Core\+Clock\+Update}} (void)
\begin{DoxyCompactList}\small\item\em Update System\+Core\+Clock variable according to Clock Register Values. The System\+Core\+Clock variable contains the core clock (H\+C\+LK), it can be used by the user application to setup the Sys\+Tick timer or configure other parameters. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{group___s_t_m32_f0xx___system___private___functions_gae0c36a9591fe6e9c45ecb21a794f0f0f}\label{group___s_t_m32_f0xx___system___private___functions_gae0c36a9591fe6e9c45ecb21a794f0f0f}} 
\index{STM32F0xx\_System\_Private\_Functions@{STM32F0xx\_System\_Private\_Functions}!SystemCoreClockUpdate@{SystemCoreClockUpdate}}
\index{SystemCoreClockUpdate@{SystemCoreClockUpdate}!STM32F0xx\_System\_Private\_Functions@{STM32F0xx\_System\_Private\_Functions}}
\doxysubsubsection{\texorpdfstring{SystemCoreClockUpdate()}{SystemCoreClockUpdate()}}
{\footnotesize\ttfamily void System\+Core\+Clock\+Update (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Update System\+Core\+Clock variable according to Clock Register Values. The System\+Core\+Clock variable contains the core clock (H\+C\+LK), it can be used by the user application to setup the Sys\+Tick timer or configure other parameters. 

\begin{DoxyNote}{Note}
Each time the core clock (H\+C\+LK) changes, this function must be called to update System\+Core\+Clock variable value. Otherwise, any configuration based on this variable will be incorrect.

-\/ The system frequency computed by this function is not the real frequency in the chip. It is calculated based on the predefined constant and the selected clock source\+:
\end{DoxyNote}

\begin{DoxyItemize}
\item If S\+Y\+S\+C\+LK source is H\+SI, System\+Core\+Clock will contain the \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___defines_gaaa8c76e274d0f6dd2cefb5d0b17fbc37}{H\+S\+I\+\_\+\+V\+A\+L\+U\+E($\ast$)}}
\item If S\+Y\+S\+C\+LK source is H\+SE, System\+Core\+Clock will contain the \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___defines_gaeafcff4f57440c60e64812dddd13e7cb}{H\+S\+E\+\_\+\+V\+A\+L\+U\+E($\ast$$\ast$)}}
\item If S\+Y\+S\+C\+LK source is P\+LL, System\+Core\+Clock will contain the \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___defines_gaeafcff4f57440c60e64812dddd13e7cb}{H\+S\+E\+\_\+\+V\+A\+L\+U\+E($\ast$$\ast$)}} or \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___defines_gaaa8c76e274d0f6dd2cefb5d0b17fbc37}{H\+S\+I\+\_\+\+V\+A\+L\+U\+E($\ast$)}} multiplied/divided by the P\+LL factors.
\end{DoxyItemize}

($\ast$) H\+S\+I\+\_\+\+V\+A\+L\+UE is a constant defined in stm32f0xx\+\_\+hal.\+h file (default value 8 M\+Hz) but the real value may vary depending on the variations in voltage and temperature.

($\ast$$\ast$) H\+S\+E\+\_\+\+V\+A\+L\+UE is a constant defined in stm32f0xx\+\_\+hal.\+h file (default value 8 M\+Hz), user has to ensure that H\+S\+E\+\_\+\+V\+A\+L\+UE is same as the real frequency of the crystal used. Otherwise, this function may have wrong result.


\begin{DoxyItemize}
\item The result of this function could be not correct when using fractional value for H\+SE crystal.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 263 of file system\+\_\+stm32f0xx.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{268   \{}
\DoxyCodeLine{269     \textcolor{keywordflow}{case} RCC\_CFGR\_SWS\_HSI:  \textcolor{comment}{/* HSI used as system clock */}}
\DoxyCodeLine{270       \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___variables_gaa3cd3e43291e81e795d642b79b6088e6}{SystemCoreClock}} = \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___defines_gaaa8c76e274d0f6dd2cefb5d0b17fbc37}{HSI\_VALUE}};}
\DoxyCodeLine{271       \textcolor{keywordflow}{break};}
\DoxyCodeLine{272     \textcolor{keywordflow}{case} RCC\_CFGR\_SWS\_HSE:  \textcolor{comment}{/* HSE used as system clock */}}
\DoxyCodeLine{273       \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___variables_gaa3cd3e43291e81e795d642b79b6088e6}{SystemCoreClock}} = \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___defines_gaeafcff4f57440c60e64812dddd13e7cb}{HSE\_VALUE}};}
\DoxyCodeLine{274       \textcolor{keywordflow}{break};}
\DoxyCodeLine{275     \textcolor{keywordflow}{case} RCC\_CFGR\_SWS\_PLL:  \textcolor{comment}{/* PLL used as system clock */}}
\DoxyCodeLine{276       \textcolor{comment}{/* Get PLL clock source and multiplication factor -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{277       pllmull = RCC-\/>CFGR \& RCC\_CFGR\_PLLMUL;}
\DoxyCodeLine{278       pllsource = RCC-\/>CFGR \& RCC\_CFGR\_PLLSRC;}
\DoxyCodeLine{279       pllmull = ( pllmull >> 18) + 2;}
\DoxyCodeLine{280       predivfactor = (RCC-\/>CFGR2 \& RCC\_CFGR2\_PREDIV) + 1;}
\DoxyCodeLine{281 }
\DoxyCodeLine{282       \textcolor{keywordflow}{if} (pllsource == RCC\_CFGR\_PLLSRC\_HSE\_PREDIV)}
\DoxyCodeLine{283       \{}
\DoxyCodeLine{284         \textcolor{comment}{/* HSE used as PLL clock source : SystemCoreClock = HSE/PREDIV * PLLMUL */}}
\DoxyCodeLine{285         \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___variables_gaa3cd3e43291e81e795d642b79b6088e6}{SystemCoreClock}} = (\mbox{\hyperlink{group___s_t_m32_f0xx___system___private___defines_gaeafcff4f57440c60e64812dddd13e7cb}{HSE\_VALUE}}/predivfactor) * pllmull;}
\DoxyCodeLine{286       \}}
\DoxyCodeLine{287 \textcolor{preprocessor}{\#if defined(STM32F042x6) || defined(STM32F048xx) || defined(STM32F072xB) || defined(STM32F078xx) || defined(STM32F091xC) || defined(STM32F098xx)}}
\DoxyCodeLine{288       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pllsource == RCC\_CFGR\_PLLSRC\_HSI48\_PREDIV)}
\DoxyCodeLine{289       \{}
\DoxyCodeLine{290         \textcolor{comment}{/* HSI48 used as PLL clock source : SystemCoreClock = HSI48/PREDIV * PLLMUL */}}
\DoxyCodeLine{291         \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___variables_gaa3cd3e43291e81e795d642b79b6088e6}{SystemCoreClock}} = (\mbox{\hyperlink{group___s_t_m32_f0xx___system___private___defines_ga47f01e5e3f2edfa94bf74c08835f3875}{HSI48\_VALUE}}/predivfactor) * pllmull;}
\DoxyCodeLine{292       \}}
\DoxyCodeLine{293 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* STM32F042x6 || STM32F048xx || STM32F072xB || STM32F078xx || STM32F091xC || STM32F098xx */}\textcolor{preprocessor}{}}
\DoxyCodeLine{294       \textcolor{keywordflow}{else}}
\DoxyCodeLine{295       \{}
\DoxyCodeLine{296 \textcolor{preprocessor}{\#if defined(STM32F042x6) || defined(STM32F048xx)  || defined(STM32F070x6) \(\backslash\)}}
\DoxyCodeLine{297 \textcolor{preprocessor}{ || defined(STM32F078xx) || defined(STM32F071xB)  || defined(STM32F072xB) \(\backslash\)}}
\DoxyCodeLine{298 \textcolor{preprocessor}{ || defined(STM32F070xB) || defined(STM32F091xC) || defined(STM32F098xx)  || defined(STM32F030xC)}}
\DoxyCodeLine{299         \textcolor{comment}{/* HSI used as PLL clock source : SystemCoreClock = HSI/PREDIV * PLLMUL */}}
\DoxyCodeLine{300         \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___variables_gaa3cd3e43291e81e795d642b79b6088e6}{SystemCoreClock}} = (\mbox{\hyperlink{group___s_t_m32_f0xx___system___private___defines_gaaa8c76e274d0f6dd2cefb5d0b17fbc37}{HSI\_VALUE}}/predivfactor) * pllmull;}
\DoxyCodeLine{301 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{302         \textcolor{comment}{/* HSI used as PLL clock source : SystemCoreClock = HSI/2 * PLLMUL */}}
\DoxyCodeLine{303         \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___variables_gaa3cd3e43291e81e795d642b79b6088e6}{SystemCoreClock}} = (\mbox{\hyperlink{group___s_t_m32_f0xx___system___private___defines_gaaa8c76e274d0f6dd2cefb5d0b17fbc37}{HSI\_VALUE}} >> 1) * pllmull;}
\DoxyCodeLine{304 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* STM32F042x6 || STM32F048xx || STM32F070x6 || }}
\DoxyCodeLine{305 \textcolor{comment}{          STM32F071xB || STM32F072xB || STM32F078xx || STM32F070xB ||}}
\DoxyCodeLine{306 \textcolor{comment}{          STM32F091xC || STM32F098xx || STM32F030xC */}\textcolor{preprocessor}{}}
\DoxyCodeLine{307       \}}
\DoxyCodeLine{308       \textcolor{keywordflow}{break};}
\DoxyCodeLine{309     \textcolor{keywordflow}{default}: \textcolor{comment}{/* HSI used as system clock */}}
\DoxyCodeLine{310       \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___variables_gaa3cd3e43291e81e795d642b79b6088e6}{SystemCoreClock}} = \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___defines_gaaa8c76e274d0f6dd2cefb5d0b17fbc37}{HSI\_VALUE}};}
\DoxyCodeLine{311       \textcolor{keywordflow}{break};}
\DoxyCodeLine{312   \}}
\DoxyCodeLine{313   \textcolor{comment}{/* Compute HCLK clock frequency -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{314   \textcolor{comment}{/* Get HCLK prescaler */}}
\DoxyCodeLine{315   tmp = \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___variables_ga6e1d9cd666f0eacbfde31e9932a93466}{AHBPrescTable}}[((RCC-\/>CFGR \& RCC\_CFGR\_HPRE) >> 4)];}
\DoxyCodeLine{316   \textcolor{comment}{/* HCLK clock frequency */}}
\DoxyCodeLine{317   \mbox{\hyperlink{group___s_t_m32_f0xx___system___private___variables_gaa3cd3e43291e81e795d642b79b6088e6}{SystemCoreClock}} >>= tmp;}
\DoxyCodeLine{318 \}}
\DoxyCodeLine{319 \textcolor{comment}{}}
\DoxyCodeLine{320 \textcolor{comment}{/**}}
\DoxyCodeLine{321 \textcolor{comment}{  * @\}}}

\end{DoxyCode}
\mbox{\Hypertarget{group___s_t_m32_f0xx___system___private___functions_ga93f514700ccf00d08dbdcff7f1224eb2}\label{group___s_t_m32_f0xx___system___private___functions_ga93f514700ccf00d08dbdcff7f1224eb2}} 
\index{STM32F0xx\_System\_Private\_Functions@{STM32F0xx\_System\_Private\_Functions}!SystemInit@{SystemInit}}
\index{SystemInit@{SystemInit}!STM32F0xx\_System\_Private\_Functions@{STM32F0xx\_System\_Private\_Functions}}
\doxysubsubsection{\texorpdfstring{SystemInit()}{SystemInit()}}
{\footnotesize\ttfamily void System\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Setup the microcontroller system. Initialize the default H\+SI clock source, vector table location and the P\+LL configuration is reset. 


\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 166 of file system\+\_\+stm32f0xx.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{261 \{}

\end{DoxyCode}
