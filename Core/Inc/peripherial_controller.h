#pragma once
#include "cs_register.h"
#include "status_reg.h"
class PeripherialDevices
{
public:
	CS_reg* CsRegister;
	STATUS_reg* StatusReg;
	bool motor_running;
	PeripherialDevices(CS_reg* cs, STATUS_reg* status);
	~PeripherialDevices();
	void read(void);
	uint8_t read_counter(void);
	void clear_counter(void);
	void start_motor(void);
	void reverse_motor();
	void stop_motor_after_run();
	void stop_motor_init();
	void start_motor_pwm();
	bool read_fire_button_press(void);
	void star_wars();
	bool toggle_motor(void);
};

const static int pwm_steps_cnt[] = { 100, 107, 115, 122, 130, 138, 145, 153, 160, 168, 176, 183, 191, 198, 206, 214, 221, 229, 236, 244, 252, 259, 267, 274, 282, 290, 297, 305, 312, 320, 328, 335, 343, 350, 358, 366, 373, 381, 388, 396, 404, 411, 419, 426, 434, 442, 449, 457, 464, 472, 480, 487, 495, 502, 510, 518, 525, 533, 540, 548, 556, 563, 571, 578, 586, 594, 601, 609, 616, 624, 632, 639, 647, 654, 662, 670, 677, 685, 692, 700, 708, 715, 723, 730, 738, 746, 753, 761, 768, 776, 784, 791, 799, 806, 814, 822, 829, 837, 844, 852, 860, 867, 875, 882, 890, 898, 905, 913, 920, 928, 936, 943, 951, 958, 966, 974, 981, 989, 996, 1004, 1012, 1019, 1027, 1034, 1042, 1050, 1057, 1065, 1072, 1080, 1088, 1095, 1103, 1110, 1118, 1126, 1133, 1141, 1148, 1156, 1164, 1171, 1179, 1186, 1194, 1202, 1209, 1217, 1224, 1232, 1240, 1247, 1255, 1262, 1270, 1278, 1285, 1293, 1300, 1308, 1316, 1323, 1331, 1338, 1346, 1354, 1361, 1369, 1376, 1384, 1392, 1399, 1407, 1414, 1422, 1430, 1437, 1445, 1452, 1460, 1468, 1475, 1483, 1490, 1498, 1506, 1513, 1521, 1528, 1536, 1544, 1551, 1559, 1566, 1574, 1582, 1589, 1597, 1604, 1612, 1620, 1627, 1635, 1642, 1650, 1658, 1665, 1673, 1680, 1688, 1696, 1703, 1711, 1718, 1726, 1734, 1741, 1749, 1756, 1764, 1772, 1779, 1787, 1794, 1802, 1810, 1817, 1825, 1832, 1840, 1848, 1855, 1863, 1870, 1878, 1886, 1893, 1901, 1908, 1916, 1924, 1931, 1939, 1946, 1954, 1962, 1969, 1977, 1984, 1992 };
